description: |
  Use the Snyk orb inside a build job to scan the application dependencies for known vulnerabilities
usage:
  version: 2.1

  orbs:
    snyk: snyk/snyk@x.y.z

  jobs:
    build:
      docker:
        - image: circleci/node:4.8.2
      steps:
        - checkout
        - run:
            command: npm install -q
        - snyk/scan:
            token-variable: SNYK_TOKEN
            severity: high
            failOnIssues: true
            monitorOnBuild: true
            project: ${CIRCLE_PROJECT_REPONAME}/${CIRCLE_BRANCH}-app
